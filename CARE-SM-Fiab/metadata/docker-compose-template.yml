version: '3'

services:  
  # FAIR Data Point server    
  fdp:
<<<<<<< HEAD
    image: markw/fdp:1.17.1
=======
    image: fairdata/fairdatapoint:1.17.1
>>>>>>> 0cf05d5e0e463e92b845a7f5d406a190a3d55dc8
    volumes:
      - ./fdp/application-{PREFIX}.yml:/fdp/application.yml:ro
    restart: always
    depends_on:
      - mongo
    networks:
      - default
      - bootstrap_graphdb_net    
        
  # FAIR Data Point client	
  fdp_client:
<<<<<<< HEAD
    image: markw/fdp_client:1.17.0
=======
    image: fairdata/fairdatapoint-client:1.17.0
>>>>>>> 0cf05d5e0e463e92b845a7f5d406a190a3d55dc8
    hostname: fdpclient
    restart: always
    environment:
      FDP_HOST: fdp
    volumes:
      - ./fdp-client/variables.scss:/src/scss/custom/_variables.scss:ro
      - ./fdp-client/assets:/usr/share/nginx/html/assets:ro
      - ./fdp-client/favicon.ico:/usr/share/nginx/html/favicon.ico:ro
    depends_on:
      - fdp
    ports:
      - {FDP_PORT}:80
    networks:
      - default
      - bootstrap_graphdb_net    

      
  # Mongo for FDP server    
  mongo:
    image: mongo:7.0
    restart: always
    volumes:
      - {PREFIX}-mongo-data:/data/db
      - {PREFIX}-mongo-init:/docker-entrypoint-initdb.d/
    networks:
      - default
      
# Define networks here
networks:
  bootstrap_graphdb_net:
    external: true

volumes:
  {PREFIX}-mongo-data:
    external: true
  {PREFIX}-mongo-init:
    external: true

